{{define "content"}}
<section class="mx-auto flex min-h-[72vh] max-w-3xl items-center justify-center">
  <div class="journal-card journal-hero w-full p-7 sm:p-10">
    <p class="journal-kicker">{{t .Messages "auth.recovery_title_short"}}</p>

    <div>
      <h1 class="journal-title">{{t .Messages "auth.reset_password_title"}}</h1>
      <p class="journal-muted mt-2">{{t .Messages "auth.reset_password_subtitle"}}</p>
    </div>

    {{if .ForcedReset}}
    <div class="status-error mt-5">{{t .Messages "auth.must_change_password"}}</div>
    {{end}}

    {{if .ErrorKey}}
    <div class="status-error mt-5">{{t .Messages .ErrorKey}}</div>
    {{end}}

    {{if .InvalidToken}}
    <div class="status-error mt-5">{{t .Messages "auth.error.invalid_reset_token"}}</div>
    <p class="journal-muted mt-4 text-sm">
      <a href="/forgot-password" class="inline-link">{{t .Messages "auth.back_to_recovery"}}</a>
    </p>
	    {{else}}
	    <form action="/api/auth/reset-password" method="post" class="mt-5 space-y-4">
	      <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">

	      {{template "password_toggle_field" (dict
	        "Messages" .Messages
        "LabelKey" "auth.new_password"
        "FieldID" "reset-password"
        "FieldName" "password"
        "Autocomplete" "new-password"
        "Required" true)}}

      {{template "password_toggle_field" (dict
        "Messages" .Messages
        "LabelKey" "auth.confirm_password"
        "FieldID" "reset-password-confirm"
        "FieldName" "confirm_password"
        "Autocomplete" "new-password"
        "Required" true)}}
      <p class="journal-muted text-xs">{{t .Messages "auth.password_requirements"}}</p>

      <button type="submit" class="btn-primary w-full">{{t .Messages "auth.reset_password"}}</button>
    </form>
    {{end}}
    <p class="journal-muted mt-5 text-sm">
      <a href="/login" class="inline-link">{{t .Messages "auth.back_to_login"}}</a>
    </p>
  </div>
</section>
{{end}}
